(this["webpackJsonpleave-a-note"]=this["webpackJsonpleave-a-note"]||[]).push([[0],{10:function(e,t,r){e.exports={"note-list":"NoteList_note-list__30UWX"}},15:function(e,t,r){},18:function(e,t,r){"use strict";r.r(t);var n=r(1),s=r.n(n),a=r(8),c=r.n(a),o=(r(15),r(3)),i=r.n(o),u=r(7),l=r(2),j=r(0),b=Object(n.createContext)(),d=function(e){var t=Object(n.useState)([]),r=Object(l.a)(t,2),s=r[0],a=r[1],c=Object(n.useState)(!0),o=Object(l.a)(c,2),d=o[0],f=o[1],O=Object(n.useState)(!0),m=Object(l.a)(O,2),p=m[0],h=m[1],v="https://react-leave-a-note-default-rtdb.europe-west1.firebasedatabase.app/notes.json",g=Object(n.useState)({isError:!1,errorMessage:""}),x=Object(l.a)(g,2),_=x[0],N=x[1];Object(n.useEffect)((function(){var e=setInterval((function(){f(!0)}),5e3);if(d){var t=function(){var e=Object(u.a)(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(v);case 3:return t=e.sent,e.next=6,t.json();case 6:r=e.sent,a(r),h(!1),N({isError:!1,errorMessage:""}),e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",N({isError:!0,errorMessage:"Something went wrong!"}));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();t(),f(!1)}return function(){return clearInterval(e)}}),[d]);var S=function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:e.sent,f(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsx)(b.Provider,{value:{notes:s,setNotes:a,isLoading:p,error:_,submitNotesHandler:S},children:e.children})},f=r(5),O=r(4),m=r.n(O),p=function(e){var t=Object(n.useContext)(b).submitNotesHandler,r=Date.now().toString(36)+Math.random().toString(36).substr(2),s=Object(n.useState)({id:r,title:"",message:""}),a=Object(l.a)(s,2),c=a[0],o=a[1],i=Object(n.useState)(!1),u=Object(l.a)(i,2),d=u[0],O=u[1],p=function(){t(c),o({id:r,title:"",message:""})};return Object(j.jsxs)("form",{className:m.a.form,onSubmit:function(e){e.preventDefault(),""!==c.title.trim()&&""!==c.message.trim()?(p(),O(!1)):O(!0)},children:[Object(j.jsx)("input",{className:d&&""===c.title?m.a.error:"",name:"title",value:c.title,onChange:function(e){o((function(t){return Object(f.a)(Object(f.a)({},t),{},{title:e.target.value})}))},placeholder:"Title"}),Object(j.jsx)("input",{className:d&&""===c.message?m.a.error:"",name:"message",value:c.message,onChange:function(e){o((function(t){return Object(f.a)(Object(f.a)({},t),{},{message:e.target.value})}))},placeholder:"Message..."}),Object(j.jsxs)("div",{children:[d&&Object(j.jsx)("div",{className:m.a["error-message"],children:"Please enter all fields!"}),Object(j.jsx)("button",{children:"Leave a note"})]})]})},h=r(9),v=r.n(h),g=function(e){return Object(j.jsxs)("li",{className:v.a.note,children:[Object(j.jsx)("h2",{children:e.title}),Object(j.jsx)("p",{children:e.message})]})},x=r(10),_=r.n(x),N=function(e){var t=Object(n.useContext)(b),r=t.notes,s=t.isLoading,a=t.error;return Object(j.jsxs)("ul",{className:_.a["note-list"],children:[!r&&Object(j.jsx)("p",{children:"Be the first one to leave a note!"}),s&&!a.isError&&Object(j.jsx)("p",{children:"Loading..."}),a.isError&&Object(j.jsx)("p",{children:a.errorMessage}),!s&&!a.isError&&r&&Object.values(r).reverse().map((function(e){return Object(j.jsx)(g,{id:e.id,title:e.title,message:e.message},e.id)}))]})};var S=function(){return Object(j.jsxs)(d,{children:[Object(j.jsx)(p,{}),Object(j.jsx)(N,{})]})};c.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(S,{})}),document.getElementById("root"))},4:function(e,t,r){e.exports={form:"NoteForm_form__3iaUj",error:"NoteForm_error__2aGBm","error-message":"NoteForm_error-message__1S_BL"}},9:function(e,t,r){e.exports={note:"Note_note__2dGR6"}}},[[18,1,2]]]);
//# sourceMappingURL=main.1e4daf2f.chunk.js.map